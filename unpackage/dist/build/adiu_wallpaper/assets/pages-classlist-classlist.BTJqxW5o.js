import{b as a,y as s,d as e,z as l,e as t,c as u,w as i,s as o,i as n,o as d,a as r,A as c,f as p,g as v,F as m,m as g,j as _}from"./index-DIgI07t-.js";import{_ as f}from"./uni-load-more.DMcF60dn.js";import{g as y,h,o as j,a as $,i as w,r as k,j as L,k as b}from"./apis.Bp_4yP8j.js";import{g as x}from"./common.B-0Il8Uc.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const F=z({__name:"classlist",setup(z){const F=a([]),N=a(!1),S=a({pageNum:1,pageSize:12}),q=a(),A=async a=>{let s;s=S.value.type?await L(a):await b(a),F.value=[...F.value,...s.data],s.data.length!==S.value.pageSize&&(N.value=!0),o("picList",F.value)};return y((a=>{let{id:e=null,name:l=null,type:t=null}=a;t&&(S.value.type=t),console.log(e,t),e||t||x(),q.value=l,S.value.classid=e,s({title:l})})),h((()=>{N.value||(S.value.pageNum++,A(S.value))})),e((()=>{A(S.value)})),j((()=>({title:`adiu-${q.value}`,path:`/pages/classlist/classlist?id=${S.value.classid}&name=${q.value}`}))),$((()=>({title:"adiu",query:`id=${S.value.classid}&name=${q.value}`}))),w((()=>{l("picList")})),(a,s)=>{const e=k(t("uni-load-more"),f),l=n,o=g,y=_;return d(),u(l,{class:"classlist"},{default:i((()=>[F.value.length||N.value?c("",!0):(d(),u(l,{key:0,class:"loadingLayout"},{default:i((()=>[r(e,{status:"loading"})])),_:1})),r(l,{class:"content"},{default:i((()=>[(d(!0),p(m,null,v(F.value,(a=>(d(),u(y,{url:`/pages/preview/preview?id=${a._id}`,class:"item",key:a._id},{default:i((()=>[r(o,{src:a.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),F.value.length?(d(),u(l,{key:1,class:"loadingLayout"},{default:i((()=>[r(e,{status:N.value?"noMore":"loading"},null,8,["status"])])),_:1})):c("",!0),r(l,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-1e61ac54"]]);export{F as default};
